{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/k0sproject/rig/ssh",
  "$ref": "#/$defs/SSH",
  "$defs": {
    "SSH": {
      "properties": {
        "address": {
          "type": "string",
          "format": "hostname",
          "description": "Address of the remote host (IP or hostname)"
        },
        "user": {
          "type": "string",
          "description": "User to log in as",
          "default": "root"
        },
        "port": {
          "type": "integer",
          "maximum": 65535,
          "minimum": 1,
          "description": "SSH port",
          "default": 22
        },
        "keyPath": {
          "type": "string",
          "description": "Optional path to private key"
        },
        "hostKey": {
          "type": "string",
          "description": "Optional known host key fingerprint"
        },
        "bastion": {
          "$ref": "#/$defs/SSH",
          "description": "Optional bastion host"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "address",
        "user",
        "port"
      ]
    }
  }
}
